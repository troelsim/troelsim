<html>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" type="application/javascript"></script>
	<script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.js"></script>
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
	<script type="text/x-handlebars-template" id="item-template">
		<div class="media">
		  <div class="media-left">
			<a href="{{link_url}}">
			  <img class="media-object" src="{{img_url}}" alt="{{name}}">
			</a>
		  </div>
		  <div class="media-body">
			<h4 class="media-heading"><a href="{{link_url}}">{{name}}</a> <small>{{category}}</small></h4>
			<p>
				{{description}}
			</p>
		  </div>
		</div>
	</script>
	<script>
	  window.fbAsyncInit = function() {
		FB.init({
		  appId      : '1178960235456575',
		  xfbml      : false,
		  version    : 'v2.6'
		});
		console.log("OK");
		FB.api(
			"/institutforx/likes?fields=picture,description,name,category,link",
			{
				access_token: "1178960235456575|bkYnls0uiCLy5sO9Ic8torA2JYM",
				limit: 1000
			},
			function (response) {
			  var source = document.getElementById("item-template").innerHTML;
			  console.log(source);
			  var template = Handlebars.compile(source);

			  if (response && !response.error) {
				var container = document.getElementById("container")
				_.each(response.data, function(item){
					var div = document.createElement("DIV");
					div.innerHTML = template({
						name: item.name,
						description: item.description,
						img_url: item.picture.data.url,
						link_url: item.link,
						category: item.category,
					});
					container.appendChild(div);
				}); 
			  }
			}
		);
	  };

	  (function(d, s, id){
		 var js, fjs = d.getElementsByTagName(s)[0];
		 if (d.getElementById(id)) {return;}
		 js = d.createElement(s); js.id = id;
		 js.src = "http://connect.facebook.net/en_US/sdk.js";
		 fjs.parentNode.insertBefore(js, fjs);
	   }(document, 'script', 'facebook-jssdk'));
	</script>
	<body>
	<div id="container"></div>
	</body>
</html>
